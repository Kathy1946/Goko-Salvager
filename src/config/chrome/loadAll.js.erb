/*jslint browser:true, devel:true */
/*globals chrome */
var i, j, s, JS, cssNode;

var scripts =  [
    "<%= config[:jslib].join("\",\n    \"") %>",
    "<%= config[:js].join("\",\n    \"") %>"
];
console.log(scripts);
j = 0;
setTimeout(function () {
    intvl = setInterval(function () {
    //for (j = 0; j < scripts.length; j += 1) {
        JS = document.createElement('script');
        console.log('Appending ' + scripts[j])
        JS.src = chrome.extension.getURL(scripts[j]);
        document.body.appendChild(JS);
        j += 1;
        if (j == scripts.length) {
            clearInterval(intvl);
        }
    //}
    }, 100);
}, 5000);

var styles =  [
    "<%= config[:css].join("\",\n    \"") %>"
];
var headID = document.getElementsByTagName("head")[0];         
for (i = 0; i < styles.length; i += 1) {
    cssNode = document.createElement('link');
    cssNode.type = 'text/css';
    cssNode.rel = 'stylesheet';
    cssNode.href = chrome.extension.getURL(styles[i]);
    //cssNode.media = 'screen';
    headID.appendChild(cssNode);
}

